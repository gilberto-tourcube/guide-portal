# Tourcube Guide Portal

A modern web portal built with FastAPI and Jinja2, designed for tour guides management using the DashLite v3.3 Bootstrap 5 admin template.

## ğŸ“‹ Overview

The Tourcube Guide Portal is a web application that consumes external APIs to provide a comprehensive interface for managing tour guides, bookings, and related operations. This project is a modernization of a legacy system, built with clean architecture principles and modern web technologies.

## ğŸ—ï¸ Architecture

### Tech Stack

- **Backend Framework**: FastAPI 0.109+
- **Template Engine**: Jinja2 3.1+
- **Frontend Theme**: DashLite v3.3 (Bootstrap 5)
- **HTTP Client**: HTTPX (async)
- **Configuration**: Pydantic Settings
- **Python Version**: 3.11+

### Key Architectural Decisions

1. **No Database**: This application is stateless and consumes external APIs only
2. **Template-Based Rendering**: Server-side rendering with Jinja2 for optimal SEO and initial load
3. **Async-First**: All API calls use async/await for better performance
4. **Clean Separation**: Clear separation between routes, services, and presentation layers

## ğŸ“ Project Structure
```
guide-portal/
â”œâ”€â”€ app/                           # Application core
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                    # FastAPI application setup and configuration
â”‚   â”œâ”€â”€ routes/                    # Route handlers (controllers)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ home.py               # Home and dashboard routes
â”‚   â”‚   â””â”€â”€ api_routes.py         # API endpoints
â”‚   â”œâ”€â”€ services/                  # Business logic and external API clients
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ api_client.py         # HTTP client for external APIs
â”‚   â”œâ”€â”€ models/                    # Pydantic models (DTOs and schemas)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ schemas.py            # Request/Response models
â”‚   â””â”€â”€ config.py                  # Application settings and environment variables
â”‚
â”œâ”€â”€ static/                        # Static assets (served by FastAPI)
â”‚   â”œâ”€â”€ css/                      # Stylesheets
â”‚   â”‚   â”œâ”€â”€ dashlite.css         # DashLite core styles
â”‚   â”‚   â”œâ”€â”€ theme.css            # Theme variables and overrides
â”‚   â”‚   â””â”€â”€ custom.css           # Project-specific styles
â”‚   â”œâ”€â”€ js/                       # JavaScript files
â”‚   â”‚   â”œâ”€â”€ bundle.js            # DashLite core scripts
â”‚   â”‚   â””â”€â”€ custom.js            # Project-specific scripts
â”‚   â””â”€â”€ images/                   # Images and icons
â”‚       â”œâ”€â”€ logo.png
â”‚       â””â”€â”€ favicon.ico
â”‚
â”œâ”€â”€ templates/                     # Jinja2 templates
â”‚   â”œâ”€â”€ base.html                 # Base layout with common structure
â”‚   â”œâ”€â”€ layouts/                  # Layout variations
â”‚   â”‚   â”œâ”€â”€ dashboard.html       # Dashboard layout (with sidebar)
â”‚   â”‚   â””â”€â”€ auth.html            # Authentication layout (centered)
â”‚   â”œâ”€â”€ pages/                    # Page templates
â”‚   â”‚   â”œâ”€â”€ index.html           # Home/Dashboard page
â”‚   â”‚   â”œâ”€â”€ guides.html          # Guides listing
â”‚   â”‚   â””â”€â”€ bookings.html        # Bookings management
â”‚   â”œâ”€â”€ components/               # Reusable template components
â”‚   â”‚   â”œâ”€â”€ navbar.html          # Top navigation bar
â”‚   â”‚   â”œâ”€â”€ sidebar.html         # Side navigation menu
â”‚   â”‚   â”œâ”€â”€ footer.html          # Footer component
â”‚   â”‚   â””â”€â”€ modals/              # Modal dialogs
â”‚   â”‚       â””â”€â”€ confirm.html
â”‚   â””â”€â”€ macros/                   # Jinja2 macros (reusable functions)
â”‚       â”œâ”€â”€ forms.html           # Form input macros
â”‚       â”œâ”€â”€ tables.html          # Table component macros
â”‚       â””â”€â”€ cards.html           # Card component macros
â”‚
â”œâ”€â”€ docs/                          # Project documentation
â”‚   â”œâ”€â”€ README.md                 # Documentation index
â”‚   â”œâ”€â”€ template/                 # DashLite template documentation
â”‚   â”‚   â”œâ”€â”€ dashlite-v3.3/       # Original template files and docs
â”‚   â”‚   â”œâ”€â”€ CUSTOMIZATIONS.md    # Template customizations made
â”‚   â”‚   â””â”€â”€ COMPONENTS_USED.md   # Components utilized in project
â”‚   â”œâ”€â”€ legacy-project/           # Legacy system documentation
â”‚   â”‚   â”œâ”€â”€ README.md            # Legacy system overview
â”‚   â”‚   â”œâ”€â”€ architecture/        # Legacy architecture diagrams and flows
â”‚   â”‚   â”œâ”€â”€ business-rules/      # Business rules documentation
â”‚   â”‚   â”œâ”€â”€ apis/                # Legacy API documentation
â”‚   â”‚   â””â”€â”€ migration/           # Migration notes and mapping
â”‚   â”‚       â”œâ”€â”€ mapping.md       # Screen and feature mapping
â”‚   â”‚       â”œâ”€â”€ differences.md   # Key differences between systems
â”‚   â”‚       â””â”€â”€ checklist.md     # Migration checklist
â”‚   â””â”€â”€ current-project/          # Current project documentation
â”‚       â”œâ”€â”€ SETUP.md             # Setup and installation guide
â”‚       â”œâ”€â”€ ARCHITECTURE.md      # Architectural decisions and patterns
â”‚       â”œâ”€â”€ API.md               # Routes and API documentation
â”‚       â””â”€â”€ DEPLOY.md            # Deployment instructions
â”‚
â”œâ”€â”€ tests/                         # Test suite (optional but recommended)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_routes.py           # Route testing
â”‚   â””â”€â”€ test_services.py         # Service layer testing
â”‚
â”œâ”€â”€ .env                          # Environment variables (not in git)
â”œâ”€â”€ .env.example                  # Environment variables template
â”œâ”€â”€ .gitignore                    # Git ignore rules
â”œâ”€â”€ requirements.txt              # Python dependencies
â”œâ”€â”€ README.md                     # This file
â””â”€â”€ run.py                        # Application entry point (optional)
```

## ğŸ¯ Layer Responsibilities

### Routes Layer (`app/routes/`)
- Handle HTTP requests and responses
- Request validation
- Call service layer for business logic
- Render templates with data
- Handle form submissions

### Services Layer (`app/services/`)
- External API communication
- Business logic implementation
- Data transformation
- Error handling and retry logic
- Cache management (if needed)

### Models Layer (`app/models/`)
- Pydantic models for request validation
- Response schemas
- Data transfer objects (DTOs)
- Type definitions

### Templates Layer (`templates/`)
- HTML presentation
- Jinja2 template inheritance
- Reusable components and macros
- Client-side interactivity setup

## ğŸ”§ Configuration

### Environment Variables

Create a `.env` file in the root directory:
```env
# API Configuration
API_BASE_URL=https://api.example.com
API_KEY=your_api_key_here
API_TIMEOUT=30

# Application Settings
DEBUG=false
APP_NAME=Tourcube Guide Portal
APP_VERSION=1.0.0

# Server Configuration
HOST=0.0.0.0
PORT=8000
RELOAD=false
```

### Key Configuration Points

- All settings managed through `app/config.py` using Pydantic Settings
- Environment-specific configurations via `.env` files
- Sensitive data never committed to repository

## ğŸš€ Getting Started

### Prerequisites

- Python 3.11 or higher
- pip or poetry for dependency management
- Access to the external API (credentials required)

### Installation

1. **Clone the repository**
```bash
git clone <repository-url>
cd guide-portal
```

2. **Create virtual environment**
```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

3. **Install dependencies**
```bash
pip install -r requirements.txt
```

4. **Configure environment**
```bash
cp .env.example .env
# Edit .env with your API credentials and settings
```

5. **Run the application**
```bash
uvicorn app.main:app --reload
```

6. **Access the application**
- Application: http://localhost:8000
- API Documentation: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## ğŸ“¦ Dependencies

### Core Dependencies
```
fastapi==0.109.0          # Web framework
uvicorn[standard]==0.27.0 # ASGI server
jinja2==3.1.3             # Template engine
httpx==0.26.0             # Async HTTP client
pydantic-settings==2.1.0  # Settings management
python-dotenv==1.0.0      # Environment variables
```

### Development Dependencies (Optional)
```
pytest==7.4.0             # Testing framework
black==23.12.0            # Code formatter
ruff==0.1.9               # Linter
```

## ğŸ¨ Template System

### DashLite Integration

The project uses DashLite v3.3, a premium Bootstrap 5 admin template. Key features:

- **Responsive Design**: Mobile-first, fully responsive
- **Component Library**: Rich set of pre-built components
- **Customizable**: Easy theme customization via CSS variables
- **Modern UI/UX**: Clean and professional interface

### Template Inheritance
```
base.html (Core structure, meta tags, assets)
    â”œâ”€â”€ layouts/dashboard.html (Dashboard layout with sidebar)
    â”‚   â”œâ”€â”€ pages/index.html
    â”‚   â”œâ”€â”€ pages/guides.html
    â”‚   â””â”€â”€ pages/bookings.html
    â””â”€â”€ layouts/auth.html (Authentication layout)
        â”œâ”€â”€ pages/login.html
        â””â”€â”€ pages/register.html
```

### Reusable Components

Use Jinja2 macros for consistent UI components:
```jinja2
{% from 'macros/forms.html' import text_input, select_input %}
{% from 'macros/tables.html' import data_table %}
{% from 'macros/cards.html' import info_card %}
```

## ğŸ”„ Development Workflow

### Adding a New Feature

1. **Define the route** in `app/routes/`
2. **Create service methods** in `app/services/` for API calls
3. **Define Pydantic models** in `app/models/schemas.py`
4. **Create templates** in `templates/pages/`
5. **Add static assets** if needed in `static/`
6. **Update documentation** in `docs/`

### Code Style

- Follow PEP 8 guidelines
- Use type hints for all functions
- Document complex logic with comments
- Keep functions focused and small

## ğŸ“š Documentation

Comprehensive documentation is available in the `docs/` directory:

- **Setup Guide**: `docs/current-project/SETUP.md`
- **Architecture Details**: `docs/current-project/ARCHITECTURE.md`
- **API Documentation**: `docs/current-project/API.md`
- **Deployment Guide**: `docs/current-project/DEPLOY.md`
- **Legacy System Reference**: `docs/legacy-project/`
- **Template Customizations**: `docs/template/CUSTOMIZATIONS.md`

## ğŸ§ª Testing

Run tests with pytest:
```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=app tests/

# Run specific test file
pytest tests/test_routes.py
```

## ğŸš¢ Deployment

See `docs/current-project/DEPLOY.md` for detailed deployment instructions.

### Quick Deploy
```bash
# Using Docker
docker build -t guide-portal .
docker run -p 8000:8000 --env-file .env guide-portal

# Using systemd service
sudo systemctl start guide-portal
```

## ğŸ¤ Contributing

1. Follow the project structure guidelines
2. Maintain code quality standards
3. Update documentation for new features
4. Test thoroughly before submitting

## ğŸ“„ License

[Your License Here]

## ğŸ‘¥ Team

- **Project Lead**: [Name]
- **Backend Developer**: [Name]
- **Frontend Developer**: [Name]

## ğŸ“ Support

For questions or issues:
- Email: support@tourcube.com
- Documentation: See `docs/` directory
- Issue Tracker: [Link to issue tracker]

---

**Version**: 1.0.0  
**Last Updated**: 2024-11-19  
**Status**: In Development