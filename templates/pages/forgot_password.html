{% extends "layouts/auth.html" %}

{% block title %}Forgot Password - Tourcube Guide Portal{% endblock %}

{% block auth_content %}
<div class="nk-block-head">
    <div class="nk-block-head-content">
        <h4 class="nk-block-title">Forgot Password</h4>
        <div class="nk-block-des">
            <p>Enter your username to receive a temporary password.</p>
        </div>
    </div>
</div>

{% if message %}
<div class="alert alert-warning alert-icon" role="alert">
    <em class="icon ni ni-alert-circle"></em>
    {{ message }}
</div>
{% endif %}

<form action="/forgot-password" method="post" id="forgotPasswordForm">
    <div class="form-group">
        <div class="form-label-group">
            <label class="form-label" for="username">Username</label>
        </div>
        <div class="form-control-wrap">
            <input type="text" class="form-control form-control-lg" id="username" name="username" placeholder="Enter your username" required autofocus>
        </div>
    </div>

    <input type="hidden" name="company_code" value="{{ company_code }}">
    <input type="hidden" name="mode" value="{{ mode }}">

    <div class="form-group">
        <button type="submit" class="btn btn-lg btn-primary btn-block" id="submitBtn">
            <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true" id="submitSpinner"></span>
            <span id="submitBtnText">Send Temporary Password</span>
        </button>
    </div>
</form>
{% endblock %}

{% block auth_footer %}
<a href="/login?company_code={{ company_code }}&mode={{ mode }}"><em class="icon ni ni-arrow-left"></em> <span>Back to Login</span></a>
{% endblock %}

{% block extra_js %}
<script>
// Show loading spinner on form submit
document.getElementById('forgotPasswordForm').addEventListener('submit', function() {
    const btn = document.getElementById('submitBtn');
    const spinner = document.getElementById('submitSpinner');
    const btnText = document.getElementById('submitBtnText');

    btn.disabled = true;
    spinner.classList.remove('d-none');
    btnText.textContent = ' Sending...';
});
</script>
{% endblock %}
